accelerator:
  displayName: Twitter Wordcloud Demo
  description: A app to create a wordcloud based on tweets
  iconUrl: https://raw.githubusercontent.com/tanzu-japan/appaccelerator-demo/main/vmwareblog-icon.png
  tags:
    - java
    - spring
    - cloud
    - wavefront
    - tanzu
    - twiiter
  # options for the UI
  options:
    - name: appName
      inputType: text
      label: app name of app
      description: app name
      defaultValue: wordcloud
      required: true
    - name: hastTags
      inputType: text
      label: Hash tags to search
      description: Hash tags to search (e.g. #hoge)
      required: true
    - name: repositoryPrefix
      inputType: text
      label: Prefix for the container image repository
      defaultValue: dev.local
      required: true
    - name: twitterBearerToken
      inputType: text
      label: Twitter API bearer token (e.g. AAAA...BSufQEAAAAAp9W...)
      required: true

engine:
  merge:
    - include: [ "**" ]
      exclude: [ "src/main/resources/application.properties", "Tiltfile" ]
    - include: [ "src/main/resources/application.properties" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: wordcloud
              with: "#appName"
            - text: "#hoge"
              with: "#hasttags"
    - include: ["Tiltfile" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: my-bearer-token
              with: "#twitterBearerToken"
        - type: ReplaceText
          substitutions:
            - text: your-registry.io/library
              with: "#repositoryPrefix"